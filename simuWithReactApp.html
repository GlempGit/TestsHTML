<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Display Web Page in Modal</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal"
        onclick="openModal()">Open Turnee </button>
    <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" padding="0">
                    <iframe id="myIframe" width="100%" height="500"></iframe>
                </div>
            </div>
        </div>
    </div>

    <script>
        const min = 1; // Valeur minimale (incluse)
        const max = 10000000; // Valeur maximale (exclue, donc 10 000 000 est inclus dans l'intervalle)

        const randomNumber = Math.floor(Math.random() * (max - min + 1)) + min;

        console.log("Random Product Number = ", randomNumber); // Affiche un entier al√©atoire entre 1 et 10 000 000

        var tabProducts = [];

        const product1 = {
            orderLineItemID: 14228802208066,
            productNumber: randomNumber,
            productTitle: "NIKE | CRACKLE PRINT TB TEE - m / blue",
            productPrice: 40,
            productURL: "/products/nike-crackle-print-tb-tee",
            productDescription: "Meet your new favorite tee, the Nike Crackle Print T-Shirt. Bringing its A-game in soft, premium fabric, it features a ribbed crew neck and a woven Nike label on the hem.",
            productSize: "m / blue",
            productImages: [
                "https://test-turnee-1.myshopify.com/cdn/shop/products/62a3dd0421fc5ccf4df6815b3694d734_medium.jpg?v=1695733082",
                "//test-turnee-1.myshopify.com/cdn/shop/products/ef0746b3c879000196dfce266154b537_medium.jpg?v=1695733082",
                "//test-turnee-1.myshopify.com/cdn/shop/products/544c0236ac6a8def363f3db689aacf08_medium.jpg?v=1695733082"
            ]
        };
        tabProducts.push(product1);

        // Create an object to hold the JSON data
        const productData = {
            orderCreatedDate: "2023-09-26 09:12:02",
            orderNumber: "1040",
            customer: {
                firstName: "Leon",
                lastName: "Durand",
                email: "Leon.Durand@gmail.com",
                phoneNumber: "0123456789",
            },
            products: tabProducts,
        };

        const encodedProducts = encodeURIComponent(JSON.stringify(productData));


        function openModal() {
            var token = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJodHRwczovL2lkZW50aXR5dG9vbGtpdC5nb29nbGVhcGlzLmNvbS9nb29nbGUuaWRlbnRpdHkuaWRlbnRpdHl0b29sa2l0LnYxLklkZW50aXR5VG9vbGtpdCIsImlhdCI6MTY5ODMyNDUzOSwiZXhwIjoxNjk4MzI4MTM5LCJpc3MiOiJmaXJlYmFzZS1hZG1pbnNkay1lcnNudEBhZG1pbi10dXJuZWUuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJzdWIiOiJmaXJlYmFzZS1hZG1pbnNkay1lcnNudEBhZG1pbi10dXJuZWUuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJ1aWQiOiJhWU9XcXNPRlo5ZEUzQ1VNZ1JlRW1SMVUzMHMxIiwiY2xhaW1zIjp7ImlzQWRtaW4iOmZhbHNlfX0.nIazg-qayb-a4WF9Oij5BjfolGGQ44_HxiI4dSrjYvdhRmdGrkH9pNchbY-VcJp5Yqo9gDHsXJgWojPFIiHfh4WdZpLj21lohXMqHQGFkkuHi6XC5NTUnp41j_XuOPGq6xz-wdA0PCh9aIZiUmdPW6PiHfm5vuwaikNHuk86NRT3ioyNALSXlWk8yQMYcR1BsK5i28Q9Lo3JvADTzFq50NDJB0kofLpsebXciKMUpzKlIcmXlY-rfMcaxsnDmIosPAiR9pC8R6zONLBCBSrI2BB14haUKMwn8wPYI7riY6gwo_Vb5LRP9jXnbHSEtK6JtsAxyyyXLfrMN0mBV0TbDw";
            var iframe = document.getElementById("myIframe");
            iframe.src = "http://localhost:3000/register?token=" + token + "&products=" + encodedProducts;
            iframe.style.display = "block";
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

</body>